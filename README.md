# 批量执行脚本使用说明

## 概述

`batch_runner.py` 是一个强大的批量执行脚本，可以同时处理多个钱包的代币创建、购买和卖出操作。

## 功能特性

- ✅ **批量处理**: 支持同时处理多个钱包
- ✅ **完整流程**: 自动执行创建→购买→卖出的完整流程
- ✅ **灵活配置**: 每个钱包可独立配置购买金额和卖出比例
- ✅ **错误处理**: 完善的错误处理和重试机制
- ✅ **详细日志**: 完整的操作日志记录
- ✅ **执行报告**: 生成详细的执行报告和CSV文件
- ✅ **安全验证**: 自动验证私钥和地址匹配
- ✅ **随机图片**: 从图片文件夹随机选择图片上传
- ✅ **真实代币**: 自动生成真实的代币名称和描述

## 数据文件格式

### 基本格式
```
钱包地址;私钥;购买金额;卖出百分比
```

### 字段说明
- **钱包地址**: 以0x开头的以太坊地址
- **私钥**: 64位十六进制私钥（可带0x前缀）
- **购买金额**: BNB数量，0表示不购买
- **卖出百分比**: 0-100的数字，100表示全部卖出

### 示例文件内容
```txt
# 注释行以#开头
# 钱包1：购买0.1 BNB，卖出100%
0x1234567890123456789012345678901234567890;1234567890123456789012345678901234567890123456789012345678901234;0.1;100

# 钱包2：购买0.05 BNB，卖出50%
0x2345678901234567890123456789012345678901;2345678901234567890123456789012345678901234567890123456789012345;0.05;50

# 钱包3：仅创建代币，不购买不卖出
0x3456789012345678901234567890123456789012;3456789012345678901234567890123456789012345678901234567890123456;0;0
```

## 使用方法

### 1. 准备数据文件
```bash
# 保存钱包信息
wallets_example.txt
# 编辑文件，替换为真实的钱包信息
```

### 2. 准备图片文件夹
```bash
# 保存图片到文件夹
images/
# 将图片文件放入文件夹（支持 jpg, png, gif, bmp, webp 格式）
```

### 3. 运行批量脚本
```bash
python3 batch_runner.py
```

### 4. 按提示操作
```
🚀 Four.meme 批量执行脚本
==================================================
请输入数据文件路径 (例如: wallets.txt): wallets_example.txt
请输入图片文件夹路径 (可选，直接回车跳过): images
请输入钱包间延迟秒数 (默认5秒): 10

📋 配置信息:
   数据文件: wallets_example.txt
   图片文件夹: images （将token图片都保存到此处）
   钱包间延迟: 10 秒

确认开始批量执行? (y/n): y
```

## 执行流程

对每个钱包，脚本会按顺序执行：

1. **余额检查** - 确保钱包有足够的BNB
2. **代币创建** - 调用API和区块链创建新代币
3. **代币购买** - 如果指定了购买金额
4. **等待确认** - 等待交易确认
5. **代币卖出** - 如果指定了卖出比例

## 输出报告

### 控制台报告
执行完成后会显示详细报告：
```
📊 批量执行报告
================================================================================
总计钱包: 4
成功处理: 3
失败处理: 1
成功率: 75.0%

📋 详细结果:
钱包 1: 0x12345678...567890 - ✅ 成功
   代币地址: 0xabcdef...123456
   创建交易: 0x111111...222222
   购买交易: 0x333333...444444
   卖出交易: 0x555555...666666
   完成步骤: balance_check, token_created, token_bought, token_sold
```

### CSV报告文件
报告会自动保存到 `logs/batch_report_timestamp.csv`，包含：
- 钱包序号和地址
- 处理状态
- 代币地址
- 各阶段交易哈希
- 错误信息

### 日志文件
详细日志保存在 `logs/batch_runner.log`

## 配置选项

### 钱包间延迟
- **作用**: 避免API频率限制
- **建议**: 5-10秒
- **范围**: 0-任意秒数

### 代币配置
脚本会为每个钱包自动生成真实的代币配置：
- **名称**: 随机组合（如 "Quantum Finance", "Dragon Protocol"）
- **符号**: 基于名称生成（如 "QUAN99", "DRAG88"）
- **描述**: 专业的英文描述
- **类别**: 随机选择（AI, Meme, DeFi, Games, Social, Others）
- **网站**: 基于代币名称生成（如 "https://quantumfinance.com"）

### 图片选择
- 从指定文件夹随机选择图片
- 避免重复使用（直到所有图片都用过）
- 支持多种格式（jpg, png, gif, bmp, webp）
- 自动记录使用的图片文件名

## 安全注意事项

### 🔒 私钥安全
- 确保数据文件权限设置正确
- 使用后及时删除或加密存储数据文件
- 不要在公共环境中运行

### 💰 资金安全
- 建议先用测试钱包验证
- 确保每个钱包有足够的BNB支付Gas费用
- 建议使用小额资金进行测试

### 🌐 网络安全
- 在安全的网络环境中运行
- 避免在公共WiFi下执行

## 故障排除

### 常见错误

#### 1. 文件格式错误
```
第X行格式错误，跳过: ...
```
**解决方案**: 检查分号分隔符，确保字段数量正确

#### 2. 私钥地址不匹配
```
第X行地址与私钥不匹配: ...
```
**解决方案**: 验证私钥和地址是否对应

#### 3. 余额不足
```
钱包余额不足: 0.001 BNB < 0.01 BNB
```
**解决方案**: 向钱包转入足够的BNB

#### 4. API限制
```
Too many requests
```
**解决方案**: 增加钱包间延迟时间

### 调试技巧

1. **查看详细日志**
   ```bash
   tail -f logs/batch_runner.log
   ```

2. **测试单个钱包**
   创建只包含一个钱包的数据文件进行测试

3. **检查交易状态**
   在BSCScan上查看交易哈希状态

## 性能优化

### 批量大小建议
- **小批量**: 1-5个钱包，适合测试
- **中批量**: 10-20个钱包，适合日常使用
- **大批量**: 50+个钱包，需要更长延迟

### 资源需求
- **内存**: 每个钱包约10MB
- **网络**: 稳定的BSC RPC连接
- **时间**: 每个钱包约30-60秒

## 高级用法

### 自定义代币配置
可以修改 `create_token_config` 方法来自定义代币参数。

### 并发执行
当前版本为串行执行，可以根据需要修改为并发执行（需注意API限制）。

### 重试机制
失败的钱包可以单独重新处理。

## 许可证与免责声明

本脚本仅供学习和研究使用，使用前请：
- 遵守当地法律法规
- 了解代币创建的风险
- 在测试环境中充分验证
- 自行承担使用风险 